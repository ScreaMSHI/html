<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S C P-异常档案-优化版</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Chart.js CDN 用于市场份额饼状图 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- 设置自定义 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'anomaly-red': '#ff3366',
                        'anomaly-cyan': '#33ccff',
                        'liminal-bg': '#0a0a1a', /* 更深的背景色 */
                        'terminal-dark': '#0f0f1c', /* 终端模块背景色 */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['\'Courier Prime\'', 'monospace'],
                    },
                    keyframes: {
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-1px)' },
                            '20%, 40%, 60%, 80%': { transform: 'translateX(1px)' },
                        },
                        // 轻微的故障抖动效果
                        glitchShake: { 
                            '0%, 100%': { transform: 'translate(0, 0)' },
                            '20%': { transform: 'translate(0.5px, -0.5px)' },
                            '40%': { transform: 'translate(-0.5px, 0.5px)' },
                            '60%': { transform: 'translate(0.5px, 0.5px)' },
                            '80%': { transform: 'translate(-0.5px, -0.5px)' },
                        },
                        textStream: { /* 数据流动画 */
                            '0%': { filter: 'hue-rotate(0deg)' },
                            '10%': { transform: 'translateY(0px) skewX(0deg)' },
                            '11%': { transform: 'translateY(-0.5px) skewX(1deg)', filter: 'hue-rotate(5deg)' },
                            '12%': { transform: 'translateY(0.5px) skewX(-1deg)' },
                            '13%': { transform: 'translateY(0px) skewX(0deg)', filter: 'hue-rotate(0deg)' },
                            '100%': { filter: 'hue-rotate(0deg)' },
                        },
                        // 扫描线轻微垂直抖动动画
                        scanlineJitter: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '0 4px' }
                        }
                    },
                    animation: {
                        shake: 'shake 0.1s infinite',
                        glitchShake: 'glitchShake 0.15s infinite alternate',
                        textStream: 'textStream 3s infinite linear',
                        scanlineJitter: 'scanlineJitter 0.5s infinite steps(10) alternate',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Inter:wght@400;700&display=swap');

        /* 页面基础过渡设置 */
        #title-screen, #main-content {
            transition: opacity 1s ease-in-out;
        }

        /* 强制标题页占满一个手机屏幕的高度 */
        #title-screen {
            min-height: 100vh;
            width: 100%;
            /* 使用更深的背景色 */
            background-image: linear-gradient(135deg, #10101f 0%, #0a0a1a 100%);
            border-bottom: 4px solid #33ccff;
            position: fixed; 
            top: 0;
            left: 0;
            z-index: 50;
        }

        /* 自定义滚动条指示器动画 */
        .scroll-indicator {
            animation: bounce 1.5s infinite;
        }

        /* 档案缩略图效果 */
        .archive-card {
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(51, 204, 255, 0.2);
            border-left: 4px solid transparent;
        }
        .archive-card:hover {
            border-left: 4px solid #33ccff;
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(51, 204, 255, 0.4);
        }
        
        details > summary::-webkit-details-marker {
            display: none;
        }
        
        /* 隐藏滚动条 */
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Modal/Dialog Fade-in */
        dialog {
            animation: fadeIn 0.3s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* --------------------------------------------------- */
        /* --- 模块标题样式 (恢复竖线和辉光) --- */
        
        /* 模块/子标题容器的样式：恢复辉光和竖线边框 */
        .terminal-title { 
            position: relative;
            overflow: hidden; 
            background-color: #0a0a1a;
            z-index: 2; 
            /* 恢复：边框和辉光 */
            box-shadow: 0 0 10px rgba(51, 204, 255, 0.2); 
            border: 1px solid rgba(51, 204, 255, 0.1); 
            padding: 0.5rem 0 0.5rem 1.0rem; 
            margin-bottom: 2rem; 
        }

        /* 恢复：标题前的竖线装饰 */
        .terminal-title::after { 
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px; /* Vertical line width */
            height: 100%;
            background-color: #33ccff; /* anomaly-cyan */
            box-shadow: 0 0 10px #33ccff;
            z-index: 1;
        }
        
        /* 恢复：所有标题文本上的蓝色辉光 */
        .terminal-title span {
            text-shadow: 0 0 8px rgba(51, 204, 255, 0.7); 
            display: inline-block; 
        }
        
        /* H1 主标题特有样式 - 覆盖/定制 */
        .main-terminal-title {
            padding-left: 1.5rem; 
            padding-right: 1.5rem;
            padding-top: 1rem;
            padding-bottom: 1rem;
            text-align: center; 
            background-color: transparent; 
            /* 强制覆盖：移除边框和通用辉光 */
            border: none !important;
            box-shadow: none !important; 
        }

        /* 强制移除主标题的通用竖线伪元素 */
        .main-terminal-title::after { 
            content: none;
        }

        /* 终端机主模块的样式增强 (欢迎语部分) - 恢复辉光边框 */
        .terminal-box {
            background-color: #0f0f1c; 
            /* 恢复：蓝色边框和辉光 */
            border: 1px solid #33ccff; 
            box-shadow: 0 0 20px rgba(51, 204, 255, 0.4); 
            position: relative;
            overflow: hidden;
            padding-top: 1.5rem; 
        }

        /* 针对主标题的故障抖动动画 - 恢复 */
        #main-title {
            animation: glitchShake 0.15s infinite alternate;
        }
        
        /* --- 局部 CRT 扫描线效果 (仅限制在主标题的 span 元素内) --- */
        
        /* 1. 确保 span 是定位上下文且内容可见 */
        #main-title span {
            position: relative;
            display: inline-block; /* 允许应用定位和宽高 */
            z-index: 3; /* 确保文本层级高于扫描线 */
            
            /* 为扫描线效果提供一点空间，使其不接触文字 */
            padding: 0 0.25rem; 
            margin: -0.25rem 0; /* 负边距抵消部分 padding */
            
            background-color: #0a0a1a; /* 确保扫描线只在背景上显示 */
            
            /* 恢复主标题文字的辉光效果 */
            text-shadow: 0 0 10px rgba(51, 204, 255, 0.9), 0 0 20px rgba(51, 204, 255, 0.5); 
        }
        
        /* 2. 创建扫描线伪元素 */
        #main-title span::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            
            /* 较明显的扫描线：使用更宽的重复模式和更高的不透明度 */
            background-image: repeating-linear-gradient(
                0deg, 
                rgba(0, 204, 255, 0.3), /* 浅色线 (Cyan) */
                rgba(0, 204, 255, 0.3) 1px, 
                transparent 1px, 
                transparent 3px /* 线之间的间距 */
            );
            background-size: 100% 4px; /* 设置重复图案的高度 */
            pointer-events: none;
            z-index: 2; /* 位于文本下方，背景上方 */
            opacity: 0.6; /* 提高不透明度，使其更明显 */
            
            /* 应用轻微的垂直抖动动画 */
            animation: scanlineJitter 0.5s infinite steps(10) alternate;
        }

        /* 3. 移除全局 CRT 效果（如果存在） */
        #main-content::before {
            content: none;
        }
        
    </style>
</head>
<body class="bg-liminal-bg text-gray-200 font-sans overflow-x-hidden">

    <!-- 1. 标题页面 (Title Screen) -->
    <div id="title-screen" class="flex flex-col items-center justify-center p-4 text-center">
        <div class="space-y-8 max-w-lg w-full">
            
            <!-- 主标题：内容保持，移除 # 号和辉光边框样式，应用局部扫描线 -->
            <div class="terminal-title main-terminal-title text-center rounded-lg">
                <h1 id="main-title" class="text-2xl md:text-4xl font-mono uppercase font-bold text-anomaly-cyan cursor-default">
                    <!-- 扫描线效果和新的辉光将仅应用于此 span 元素区域 -->
                    <span>[有限认知分部 // 数据检索终端]</span>
                </h1>
            </div>

            <!-- 时间条 (数字快速变化) -->
            <div class="p-4 bg-gray-900 border-2 border-anomaly-cyan rounded-xl shadow-lg transition-all duration-500">
                <p class="text-xs text-anomaly-cyan mb-2">系统时间戳 | S Y S T E M - C L O C K</p>
                <!-- JS 会在 generateGlitchTime 中切换 text-anomaly-red/cyan 颜色，模拟不稳定 -->
                <div id="time-display" class="font-mono text-xl md:text-3xl text-anomaly-red">
                    <span id="date-component">0000-00-00</span>
                    <span class="text-white">_</span>
                    <span id="time-component">00:00:00</span>
                    <span id="ms-component" class="text-sm opacity-75">.000</span>
                </div>
            </div>

            <!-- 激活按钮 -->
            <button id="start-button" class="px-8 py-3 w-full bg-anomaly-cyan text-terminal-dark font-bold rounded-lg shadow-xl hover:bg-cyan-300 transition-transform active:scale-95 duration-200 uppercase font-mono tracking-widest text-lg">
                <span id="button-text">访问权限请求</span>
            </button>
            
            <!-- 加载进度条 -->
            <div id="loading-container" class="mt-4 hidden">
                <p class="text-anomaly-cyan text-sm mb-2 font-mono">
                    <span id="loading-status">加载中... </span>
                    <span id="loading-percent">0</span>%
                </p>
                <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                    <div id="loading-bar" class="h-2 bg-anomaly-red transition-all duration-300 ease-linear" style="width: 0%;"></div>
                </div>
            </div>

            <!-- 加载完成后显示的向下箭头 -->
            <div id="scroll-indicator" class="hidden pt-12">
                <p class="text-sm font-mono text-gray-400 mb-2">[ ACCESS GRANTED ]</p>
                <svg class="scroll-indicator w-10 h-10 mx-auto text-anomaly-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>

        </div>
    </div>

    <!-- 2. 主内容区域 (初始隐藏) -->
    <main id="main-content" class="container mx-auto p-6 md:p-10 space-y-16 opacity-0 pointer-events-none relative">
        
        <!-- 导言 - 有限认知-数据检索终端 (恢复辉光边框) -->
        <div class="max-w-4xl mx-auto mb-12 p-4 md:p-6 rounded-lg shadow-2xl terminal-box">
            
            <h2 class="text-lg md:text-xl font-bold font-mono text-anomaly-cyan mb-2 tracking-widest text-center px-2">
                欢迎，访客。您的访问操作已被记录。
            </h2>

            <!-- 警示状态行 -->
            <p class="text-center font-mono text-sm text-yellow-400 animate-pulse mb-0">
                [ WARNING: LIMITED ACCESS RIGHTS. DATA INTEGRITY CHECK REQUIRED ]
            </p>

        </div>

        <!-- 模块一：补给仓库 -->
        <section>
            <!-- 模块标题：恢复竖线和辉光 -->
            <div class="terminal-title rounded-lg">
                <h1 class="text-2xl font-bold font-mono text-anomaly-cyan tracking-widest">
                    <span>补给仓库</span>
                </h1>
            </div>

            <!-- 购买规则 (PURCHASE PROTOCOL) -->
            <div class="bg-gray-800 p-4 mb-6 rounded-lg border border-gray-700 font-mono">
                <p class="text-sm text-anomaly-cyan mb-3">:: 采购协议 [PURCHASE PROTOCOL] ::</p>
                <ul class="text-sm text-gray-400 space-y-2 list-none pl-0">
                    <!-- 规则 1: 补给价格限制 (圆点) -->
                    <li class="flex items-start">
                        <span class="text-anomaly-red mr-2 mt-px text-base">•</span>
                        <span>
                            可购买的单个补给价格需小于等于参加外勤任务*10的嘉奖数量
                        </span>
                    </li>
                    <!-- 规则 2: 运费规定 (圆点) -->
                    <li class="flex items-start">
                        <span class="text-anomaly-red mr-2 mt-px text-base">•</span>
                        <span>
                            则购买时需要增加运费（A系列：1点嘉奖，其余系列：2点嘉奖，运费不超过物品价格）
                        </span>
                    </li>
                    <!-- 规则 3: 最终解释权 (圆点) -->
                    <li class="flex items-start">
                        <span class="text-anomaly-red mr-2 mt-px text-base">•</span>
                        <span>
                            价格和描述均有可能进行调整，经理拥有最终解释权
                        </span>
                    </li>
                </ul>
            </div>

            <!-- 可展开的小模块 -->
            <div class="space-y-4">
                
                <!-- A-01: 游戏地图 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-01 ] 游戏地图 (Game Map)</span>
                        <div class="flex items-center space-x-4">
                            <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                        </div>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <!-- 传输成本 (DATA COST) -->
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">25</span>
                        </div>
                        
                        <p class="text-sm leading-relaxed mb-4">
                            一张以携带者为中心，半径500m，随移动实时更新的像素风格地图。可以显示附近道路、墙壁、河流、房间等的基本布局。地图范围内的平凡生命会以小人图标标记，并标出其视野范围。
                            <br><br>
                            特工可以消耗一点任意品质（Quality）的素质保证（Quality Assurance），来实现一项以下功能：
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>标记一个目标持续跟踪其位置（超出范围会以小箭头标记大概方向）</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>显示两点之间的一条较短可用道路</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>原地建立传送锚点</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>在明显的10秒读条效果后前往传送锚点</span></li>
                        </ul>
                    </div>
                </details>

                <!-- A-02: 雪王喷雾 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-02 ] 雪王喷雾 (Snow King Spray)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">15</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            外观为一个正常喷漆罐，上面印有雪王卡通图案。内部充满异常制冷剂，常温下为液体。一旦从喷嘴喷出降压，制冷剂会立即汽化，并吸收大量热能，瞬间冻结目标。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>冰冻效果持续 5 秒。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>喷雾最多使用 4 次，使用完后，需等待 24 小时进行内部充能。</span></li>
                        </ul>
                        <p class="text-sm leading-relaxed">
                            <span class="text-anomaly-red">泄露风险：</span>若喷漆罐因受损炸裂，则对范围 10 米内所有生物及物品进行冰封，持续时间 3 秒。此状况下的喷雾无法回收。
                        </p>
                    </div>
                </details>

                <!-- A-03: 降温蛋筒 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-03 ] 降温蛋筒 (Cooling Cone)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">4</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            外观是个普通的冰淇淋蛋筒，但实际上不易受外力（不超过普通男性人类用力挥出的一拳）破坏。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>蛋筒外缘是稳定的零下 18°C（保存冰淇淋的最佳温度！）。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>能够将 200ml 的开水在 10 秒内冻结。</span></li>
                        </ul>
                    </div>
                </details>

                <!-- A-04: 一斤鸭梨 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-04 ] 一斤鸭梨 (One Catty of Pears)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">6</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            一个网兜装着的 3 个鸭梨，大小形状可能都不太一样，但三个的总重量一定是精准的 500g 重。它们真的很好吃。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>任何吃下鸭梨或含梨汁食品的人（生效的浓度最少 1:3）都会沉溺于回忆之中，并变得极度充满倾诉欲。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>这三个鸭梨如果分离超过 24 小时就会变成普通的鸭梨。</span></li>
                        </ul>
                    </div>
                </details>

                <!-- A-05: 暴风雪桶 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-05 ] 很coooooool的暴风雪桶 (Blizzard Bucket)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">6</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            一个印着三角形 logo，写着“暴风雪冰淇淋”的很 coooooool 的冰淇淋桶，看上去只是一个很 coooooool 的大份冰淇淋。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>打开之后就会有一团暴风雪冲出来。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>被暴风雪覆盖的人会觉得一切都变得很 coooooool，哪怕出现再奇怪的事情也不妨碍他们赞叹一声“cool”然后继续做自己的事情。</span></li>
                        </ul>
                    </div>
                </details>

                <!-- A-06: 红油辣椒冰淇淋 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-06 ] 红油辣椒冰淇淋 (Chili Oil Ice Cream)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">2 / set (3 cups)</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            一个淋满了红油的大圣代，以至于看起来像冰淇淋新装的火锅底料。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>服用后会在 1 小时内将你的体温稳定在 36 摄氏度。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>服用后瞬间增重 10 斤，并在后续的一个小时内消耗你的体重 20 斤。</span></li>
                        </ul>
                        <p class="text-sm leading-relaxed">
                            <span class="text-anomaly-red">副作用：</span>在食用后即使是超人来了也抵抗不住的冷热交替，必定会引起腹泻或相关肠道疾病，还会让你的痔疮像爱人的心跳一样火热，如果没有，它会奖励你一个的。
                        </p>
                    </div>
                </details>

                <!-- A-07: 沉默的八音盒 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-07 ] 沉默的八音盒 (Silent Music Box)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">4</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            一个八音盒，打开时，会弹出一个缓慢旋转的指挥家塑像，塑像有着白色手套。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>附近 5m 的除了特工的凡俗心智会感到抑郁而想要回到自己的住处或者安全的角落独自伤感，这种伤感来自于自身回忆，因而不会产生松散端。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>持续时间为一分钟的沉默歌曲结束后，指挥家会停止转动，八音盒将再也不能使用，陷入永远的沉默。</span></li>
                        </ul>
                    </div>
                </details>

                <!-- A-08: 素质柠檬水 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-08 ] 素质柠檬水 (Quality Lemonade)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">12</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            这是杯清爽解腻的柠檬水共 32盎司，可以随时为你让你保持干劲和好心情。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>饮用一杯可以清空一点异常状态。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>若饮用时嚼碎吞服柠檬片（极其酸涩），则可以瞬间恢复 1 点素质保障。</span></li>
                        </ul>
                        <p class="text-sm leading-relaxed">
                            <span class="text-anomaly-red">注意：</span>为了保护环境，请不要随手扔杯子以及注意表情管理。
                        </p>
                    </div>
                </details>

                <!-- A-09: 雪景球 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-cyan-500/30 border border-anomaly-cyan/30">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-yellow-300 font-bold">
                        <span>[ A-09 ] 雪景球 (Snow Globe)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-anomaly-cyan/30">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">3 / use</span>
                        </div>
                        <p class="text-sm leading-relaxed mb-4">
                            外观：一个内置一根冰淇淋的雪景球，摇晃时会发出音乐。
                        </p>
                        <ul class="text-sm list-none pl-4 space-y-2 mb-4">
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>当你剧烈摇晃时，除你和你指定的目标外，任何平凡生物都会感觉到刺骨的寒意并放下手中的事，立刻朝着最近的温暖源跑去，并在那里停留 5 分钟。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>范围：为以使用者为中心半径 25 米的球形。</span></li>
                            <li class="flex items-start"><span class="text-green-400 mr-2 mt-px text-sm">►</span><span>收到影响者不会因该能力产生松散端。</span></li>
                        </ul>
                    </div>
                </details>

                <!-- B-03: 异常源定位器 -->
                <details class="bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 open:shadow-yellow-500/30 border border-yellow-500/20">
                    <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 text-anomaly-red font-bold">
                        <span>[ B-03 ] 异常源定位器 (Anomaly Locator)</span>
                        <span class="text-xl transform transition-transform duration-300 summary-indicator">&#x25BC;</span>
                    </summary>
                    <div class="p-4 bg-gray-900 text-gray-400 border-t border-yellow-500/20">
                        <div class="mb-6 py-2 px-4 bg-gray-800 border-b-2 border-t-2 border-anomaly-red font-mono flex justify-between items-center rounded-lg">
                            <span class="text-sm text-anomaly-cyan uppercase tracking-widest">:: 传输成本 (DATA COST) ::</span>
                            <span class="text-2xl font-bold text-anomaly-red">75</span>
                        </div>
                        <p class="text-sm">
                            一个校准频率偏移的设备。请注意，它找到的“异常”可能只是你所处时间线的正常现象。设备状态：不稳定，持续过热。
                        </p>
                    </div>
                </details>
            </div>
        </section>

        <!-- 模块二：组织阵营 (市场份额) -->
        <section>
            <!-- 模块标题：恢复竖线和辉光 -->
            <div class="terminal-title rounded-lg">
                <h1 class="text-2xl font-bold font-mono text-anomaly-cyan tracking-widest">
                    <span>市场份额</span>
                </h1>
            </div>

            <div class="bg-gray-900 p-6 rounded-xl border border-gray-700 shadow-xl flex flex-col md:flex-row items-center justify-around">
                
                <!-- 饼状图容器 -->
                <div class="w-full md:w-1/2 p-2 max-w-sm flex justify-center">
                    <canvas id="marketShareChart" class="bg-terminal-dark/50 rounded-lg p-4"></canvas>
                </div>
                
                <!-- 阵营信息和描述 -->
                <div class="w-full md:w-1/2 p-2 mt-6 md:mt-0 font-mono text-sm space-y-4">
                    <h3 class="text-2xl font-bold text-anomaly-red mb-3">
                        三角机构 (Triangular Agency)
                    </h3>
                    
                    <ul class="text-gray-300 space-y-2">
                        <li>
                            <span class="inline-block w-3 h-3 rounded-full bg-anomaly-cyan mr-2"></span>
                            <strong class="text-anomaly-cyan">三角机构:</strong> 25% (可追踪)
                        </li>
                        <li>
                            <span class="inline-block w-3 h-3 rounded-full bg-anomaly-red mr-2"></span>
                            <strong class="text-anomaly-red">？？？:</strong> 75% (未探知)
                        </li>
                    </ul>

                    <p class="mt-4 p-3 bg-gray-700/50 rounded-lg border-l-4 border-yellow-500 text-sm italic text-gray-400">
                        警告：当前网络仅能确定**三角机构**占据 25% 的已知市场份额。其余 75% 仍未被探知，归属于代号为 **"？？？"** 的未知实体。
                    </p>
                </div>
            </div>
        </section>

        <!-- 模块三：机密档案库 -->
        <section>
            <!-- 模块标题：恢复竖线和辉光 -->
            <div class="terminal-title rounded-lg">
                <h1 class="text-2xl font-bold font-mono text-anomaly-cyan tracking-widest">
                    <span>机密档案库</span>
                </h1>
            </div>

            <div id="archives-grid" class="grid md:grid-cols-3 gap-6">
                <!-- 档案 1: 碎裂星云 -->
                <div class="archive-card bg-gray-900 rounded-xl overflow-hidden cursor-pointer border border-anomaly-cyan/30">
                    <div class="p-4">
                        <h4 class="text-lg font-bold text-anomaly-red mb-2">档案: S-77</h4>
                        <p class="text-sm text-gray-500 mb-3">碎裂星云事件报告</p>
                        <p class="text-xs text-gray-400 line-clamp-3"><span class="text-yellow-400">摘要:</span> 2012年11月，在欧洲上空监测到无法解释的重力场波动，导致短暂的物理定律松弛。</p>
                    </div>
                    <!-- 弹出页面按钮 -->
                    <button class="expand-button w-full bg-gray-800 py-2 text-sm text-anomaly-cyan hover:bg-anomaly-cyan hover:text-terminal-dark transition-colors duration-200" onclick="openArchiveModal('archive1')">弹出页面</button>
                </div>

                <!-- 档案 2: 非物质信使 -->
                <div class="archive-card bg-gray-900 rounded-xl overflow-hidden cursor-pointer border border-anomaly-cyan/30">
                    <div class="p-4">
                        <h4 class="text-lg font-bold text-anomaly-red mb-2">档案: P-19</h4>
                        <p class="text-sm text-gray-500 mb-3">非物质信使实验记录</p>
                    </div>
                    <!-- 弹出页面按钮 -->
                    <button class="expand-button w-full bg-gray-800 py-2 text-sm text-anomaly-cyan hover:bg-anomaly-cyan hover:text-terminal-dark transition-colors duration-200" onclick="openArchiveModal('archive2')">弹出页面</button>
                </div>

                <!-- 档案 3: 循环梦境 -->
                <div class="archive-card bg-gray-900 rounded-xl overflow-hidden cursor-pointer border border-anomaly-cyan/30">
                    <div class="p-4">
                        <h4 class="text-lg font-bold text-anomaly-red mb-2">档案: M-04</h4>
                        <p class="text-sm text-gray-500 mb-3">循环梦境个体评估</p>
                        <p class="text-xs text-gray-400 line-clamp-3"><span class="text-yellow-400">摘要:</span> 对一名声称每天晚上都在同一个地点、做同一件事（吃一个不存在的苹果）的个体的评估。</p>
                    </div>
                    <!-- 弹出页面按钮 -->
                    <button class="expand-button w-full bg-gray-800 py-2 text-sm text-anomaly-cyan hover:bg-anomaly-cyan hover:text-terminal-dark transition-colors duration-200" onclick="openArchiveModal('archive3')">弹出页面</button>
                </div>
            </div>
        </section>

    </main>
    
    <!-- 弹出页面 (Modal/Dialog) 结构 -->
    <!-- 模态框在手机上会最大化，确保内容可见 -->
    <dialog id="archiveModal" class="p-6 rounded-2xl shadow-2xl backdrop:bg-black/80 bg-gray-900 border border-anomaly-cyan/80 w-11/12 max-w-3xl text-gray-100">
        <div class="flex justify-between items-start mb-4 border-b border-gray-700 pb-3">
            <h3 id="modalTitle" class="text-2xl font-bold text-anomaly-cyan">档案标题</h3>
            <button onclick="closeModal()" class="text-3xl font-light text-gray-400 hover:text-anomaly-red transition-colors ml-4">&times;</button>
        </div>
        <div class="pt-4 space-y-4">
            <p id="modalContent" class="text-gray-300 whitespace-pre-wrap leading-relaxed font-mono text-sm"></p>
            <p class="text-xs italic text-yellow-500 bg-gray-800 p-3 rounded-lg border-l-2 border-yellow-500">
                <span class="font-semibold">注意：</span>此档案已按您的要求以“弹出页面” (Pop-up) 格式显示。
            </p>
        </div>
        <div class="mt-6 text-right">
            <button onclick="closeModal()" class="px-6 py-2 bg-anomaly-red text-white font-semibold rounded-lg hover:bg-red-500 transition duration-200">
                [ 关闭档案 ]
            </button>
        </div>
    </dialog>

    <!-- JavaScript 逻辑 -->
    <script>
        // --- 全局常量和变量 ---
        const TIME_DISPLAY = document.getElementById('time-display');
        const DATE_COMPONENT = document.getElementById('date-component');
        const TIME_COMPONENT = document.getElementById('time-component');
        const MS_COMPONENT = document.getElementById('ms-component');
        const START_BUTTON = document.getElementById('start-button');
        const LOADING_CONTAINER = document.getElementById('loading-container');
        const LOADING_BAR = document.getElementById('loading-bar');
        const LOADING_PERCENT = document.getElementById('loading-percent');
        const MAIN_TITLE = document.getElementById('main-title');
        const TITLE_SCREEN = document.getElementById('title-screen');
        const MAIN_CONTENT = document.getElementById('main-content');
        
        // Modal 元素
        const ARCHIVE_MODAL = document.getElementById('archiveModal');
        const MODAL_TITLE = document.getElementById('modalTitle');
        const MODAL_CONTENT = document.getElementById('modalContent');


        let glitchInterval;
        let loadingProgress = 0;
        const TARGET_YEAR = 2012;
        const TARGET_MONTH = 11; 

        // --- 数据存储 (机密档案) ---
        const ARCHIVE_DATA = {
            archive1: { title: "档案 S-77: 碎裂星云事件报告", text: "记录日期: 2012年11月22日 04:47:11\n\n[机密等级: 5/5 - 绝对不可知]\n\n事件摘要：位于格陵兰海的监测站记录到时空结构出现局部撕裂，持续时间约为4.3秒。目击者（一名渔民，代号'Maelstrom'）报告天空在撕裂期间呈现出'一万个时钟'同时破碎的景象。\n\n分析：重力常数在撕裂期间波动了±0.00000001%。这足以导致水分子在短时间内无法保持液态。任何企图通过常规手段理解此次事件的尝试都被判定为高风险的认知污染。建议将此档案标记为'非事件'，并在所有官方记录中将其替换为'天气反常'。" },
            archive2: { title: "档案 P-19: 非物质信使实验记录", text: "记录日期: 2012年11月10日 11:59:00\n\n[机密等级: 3/5 - 需授权]\n\n实验目的：捕获并分析代号'低语'的非物质信使。信使不遵循任何已知宇宙定律，通过潜意识共振传递信息。\n\n实验结果：信使传递的信息被探员L-03记录为一串二进制代码。解码后得到：'他们看到了你'。随后，L-03的手部开始出现不可控的、无规律的震颤。此震颤与心跳或呼吸均不相关。L-03已被隔离，信使被判定为具有高认知侵入性。实验终止，建议将所有捕获尝试降级为被动监测。" },
            archive3: { title: "档案 M-04: 循环梦境个体评估", text: "记录日期: 2012年11月05日 19:30:00\n\n[机密等级: 4/5 - 敏感]\n\n个体代号: '锚点'\n\n评估：锚点是一个活生生的、自洽的时间循环。他所处的梦境（位于一个不存在的灰色小镇，始终在一家咖啡馆里吃苹果）是他时间线中唯一稳定的点。如果锚点被唤醒或打破循环，该时间线将面临不可预测的重写风险。评估建议：保持距离，被动观察。如果他向你提及任何关于'正确的时钟'的信息，立即终止对话。" }
        };

        // --- 核心功能: 时间和故障效果 (仅保留随机数字和颜色切换) ---

        function generateGlitchTime() {
            const now = new Date();
            const randomYear = Math.floor(Math.random() * 9000) + 1000;
            const randomMonth = String(Math.floor(Math.random() * 100)).padStart(2, '0');
            const randomDay = String(Math.floor(Math.random() * 100)).padStart(2, '0');
            
            const currentHour = String(now.getHours()).padStart(2, '0');
            const currentMinute = String(now.getMinutes()).padStart(2, '0');
            const randomSecond = String(Math.min(59, Math.max(0, now.getSeconds() + Math.floor(Math.random() * 10) - 5))).padStart(2, '0');
            
            const randomMs = String(Math.floor(Math.random() * 1000)).padStart(3, '0');

            DATE_COMPONENT.textContent = `${randomYear}-${randomMonth}-${randomDay}`;
            TIME_COMPONENT.textContent = `${currentHour}:${currentMinute}:${randomSecond}`;
            MS_COMPONENT.textContent = `.${randomMs}`;

            // 随机切换颜色 (保留这一步来模拟不稳定状态)
            if (Math.random() < 0.5) {
                TIME_DISPLAY.classList.replace('text-anomaly-red', 'text-anomaly-cyan');
            } else {
                TIME_DISPLAY.classList.replace('text-anomaly-cyan', 'text-anomaly-red');
            }
        }

        function startGlitch() {
            glitchInterval = setInterval(generateGlitchTime, 50); 
        }

        function stabilizeTime(targetMonth) {
            clearInterval(glitchInterval);

            // 移除随机颜色切换，稳定为白色
            TIME_DISPLAY.classList.remove('text-anomaly-red', 'text-anomaly-cyan');
            TIME_DISPLAY.classList.add('text-white');
            
            const now = new Date();
            // 稳定时间到 2012 年 11 月
            const stableDate = new Date(TARGET_YEAR, targetMonth - 1, now.getDate(), now.getHours(), now.getMinutes(), now.getSeconds(), now.getMilliseconds());
            
            const year = stableDate.getFullYear();
            const month = String(stableDate.getMonth() + 1).padStart(2, '0'); 
            const day = String(stableDate.getDate()).padStart(2, '0');
            const hour = String(stableDate.getHours()).padStart(2, '0');
            const minute = String(stableDate.getMinutes()).padStart(2, '0');
            const second = String(stableDate.getSeconds()).padStart(2, '0');

            DATE_COMPONENT.textContent = `${year}-${month}-${day}`;
            TIME_COMPONENT.textContent = `${hour}:${minute}:${second}`;
            MS_COMPONENT.textContent = '.000';
            
            TIME_DISPLAY.parentElement.classList.replace('border-anomaly-cyan', 'border-gray-500');
        }

        /**
         * 处理按钮点击和加载过程
         */
        function handleStart() {
            START_BUTTON.disabled = true;
            document.getElementById('button-text').textContent = '协议激活中...';
            LOADING_CONTAINER.classList.remove('hidden');

            const totalDuration = 3000; 
            const steps = 100;
            const intervalTime = totalDuration / steps;

            const loadingInterval = setInterval(() => {
                loadingProgress++;
                const widthPercent = Math.min(100, loadingProgress);
                
                LOADING_BAR.style.width = `${widthPercent}%`;
                LOADING_PERCENT.textContent = widthPercent;

                if (loadingProgress >= 100) {
                    clearInterval(loadingInterval);
                    
                    // 加载完成后的操作
                    document.getElementById('button-text').textContent = '访问成功';
                    document.getElementById('loading-status').textContent = '同步完成';
                    LOADING_BAR.classList.replace('bg-anomaly-red', 'bg-green-500');
                    
                    // 1. 停止故障并稳定时间
                    stabilizeTime(11); 

                    // 2. 页面切换逻辑：隐藏标题页，显示主内容
                    setTimeout(() => {
                        // 移除主标题的抖动动画 (CSS 中已添加，这里需要移除)
                        // 注意: 这里不移除 CSS 中的 glitchShake 动画，因为它增加了赛博朋克感，但为了满足上一步的要求，我在上一步移除了。
                        // 既然现在用户要求恢复抖动，我们保持 CSS 中的动画定义，并确保它在标题页持续运行即可。
                        
                        // 淡出标题页
                        TITLE_SCREEN.style.opacity = '0';
                        TITLE_SCREEN.style.pointerEvents = 'none';
                        
                        // 显示并淡入主内容
                        MAIN_CONTENT.classList.remove('opacity-0', 'pointer-events-none');

                        // 移除 fixed 定位，让文档流恢复正常，以便滚动
                        setTimeout(() => {
                            TITLE_SCREEN.style.display = 'none';
                        }, 1000); 

                    }, 800);
                }
            }, intervalTime);
        }
        
        // --- 市场份额饼状图 Chart.js 逻辑 ---
        function setupMarketShareChart() {
            const ctx = document.getElementById('marketShareChart');
            
            const chartData = {
                labels: ['三角机构 (25%)', '？？？ (75%)'],
                datasets: [{
                    data: [25, 75], // 25% for Triangular Agency, 75% for ???
                    backgroundColor: [
                        '#33ccff', // anomaly-cyan
                        '#ff3366'  // anomaly-red
                    ],
                    hoverOffset: 10,
                    borderWidth: 2,
                    borderColor: '#1a1a2e' // liminal-bg
                }]
            };

            const chartOptions = {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#D1D5DB', // gray-300
                            font: {
                                size: 14,
                                family: 'Courier Prime'
                            },
                            boxWidth: 20
                        }
                    },
                    title: {
                        display: false,
                    }
                }
            };

            new Chart(ctx, {
                type: 'doughnut',
                data: chartData,
                options: chartOptions
            });
        }


        // --- 弹出页面 (Modal) 逻辑 ---
        
        /**
         * 显示模态窗口（弹出页面）
         * @param {string} archiveId 档案 ID (key in ARCHIVE_DATA)
         */
        function openArchiveModal(archiveId) {
            const data = ARCHIVE_DATA[archiveId];
            if (data) {
                MODAL_TITLE.textContent = data.title;
                MODAL_CONTENT.textContent = data.text;
                ARCHIVE_MODAL.showModal();
            } else {
                console.error("Archive data not found for ID:", archiveId);
            }
        }

        /**
         * 关闭模态窗口
         */
        function closeModal() {
            ARCHIVE_MODAL.close();
        }
        
        // 允许用户点击 backdrop 关闭 modal
        ARCHIVE_MODAL.addEventListener('click', (e) => {
            const dialogDimensions = ARCHIVE_MODAL.getBoundingClientRect()
            if (
                e.clientX < dialogDimensions.left ||
                e.clientX > dialogDimensions.right ||
                e.clientY < dialogDimensions.top ||
                e.clientY > dialogDimensions.bottom
            ) {
                closeModal();
            }
        });


        // --- Details 箭头翻转逻辑 ---
        document.querySelectorAll('details').forEach(details => {
            details.addEventListener('toggle', () => {
                const indicator = details.querySelector('.summary-indicator');
                if (indicator) {
                    if (details.open) {
                        indicator.style.transform = 'rotate(180deg)';
                    } else {
                        indicator.style.transform = 'rotate(0deg)';
                    }
                }
            });
        });


        // --- 初始化 ---
        window.onload = function() {
            startGlitch(); // 启动不稳定的时间动画 (仅数字/颜色切换)
            START_BUTTON.addEventListener('click', handleStart);
            setupMarketShareChart(); // 启动饼状图
        }

        
    </script>
</body>
</html>